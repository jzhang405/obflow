---
title: 最佳实践
description: iFlow CLI 在实际项目中的高效使用指南
sidebar_position: 9
---

# 最佳实践

本指南汇总了在实际项目中使用 iFlow CLI 的最佳实践，帮助您最大化 AI 助手的效率，避免常见陷阱。

## 开发工作流程最佳实践

### 1. 项目初始化工作流

```
# 标准项目开始流程
/init                    # 分析项目结构
!git status             # 检查当前状态
请帮我制定这个项目的开发计划
```

**为什么这样做？**
- `/init` 为 AI 提供完整的项目上下文
- Git 状态帮助了解当前开发阶段
- 明确的计划请求获得针对性建议

### 2. 功能开发工作流

```
# 开发新功能的标准流程
/clear                  # 清除之前的上下文
/init                   # 重新分析项目
我需要实现[具体功能描述]，请帮我分析需要修改哪些文件
!git checkout -b feature/new-feature
# 根据建议进行开发
!npm test              # 测试验证
!git add . && git commit -m "Add new feature"
```

### 3. 调试问题工作流

```
# 遇到问题时的标准流程
!npm test              # 复现问题
这是错误信息：[粘贴完整错误]
请帮我分析问题原因并提供解决方案
# 根据建议修复
!npm test              # 验证修复
```

## 提问技巧

### 有效的提问方式

**好的提问**：
```
我在实现用户认证功能时遇到了问题。这是我的代码：
[粘贴相关代码]

运行测试时出现以下错误：
[粘贴完整错误信息]

我使用的是 Node.js + Express + JWT，请帮我分析问题并提供解决方案。
```

**不好的提问**：
```
代码不工作，帮我修复一下
```

### 提供上下文的技巧

1. **包含相关代码片段**
2. **提供完整的错误信息**
3. **说明技术栈和环境**
4. **描述预期行为 vs 实际行为**
5. **提及已经尝试的解决方案**

## 代码审查最佳实践

### 使用子代理进行代码审查

```
# 开发完成后的审查流程
@code-reviewer 请审查我刚完成的用户登录功能

# 针对特定文件
@code-reviewer 请重点审查 src/auth.js 的安全性

# 针对特定提交
!git show HEAD
@code-reviewer 请审查这次提交的更改
```

### 安全审查检查清单

在提交代码前，确保检查：

- [ ] 输入验证和消毒
- [ ] 身份验证和授权
- [ ] 敏感信息处理
- [ ] 错误处理和日志记录
- [ ] SQL 注入防护
- [ ] XSS 攻击预防

## 测试驱动开发

### 测试优先的工作流程

```
# TDD 工作流程
我要实现[功能描述]，请先帮我编写测试用例
# 编写测试
!npm test              # 运行测试（应该失败）
请帮我实现能通过这些测试的代码
# 实现功能
!npm test              # 验证测试通过
@code-reviewer 请审查实现的代码
```

### 测试覆盖率提升

```
!npm run coverage      # 检查当前覆盖率
请帮我为覆盖率不足的文件添加测试：
[列出需要测试的文件和函数]
```

## 重构最佳实践

### 安全重构流程

```
# 重构前的准备
!npm test              # 确保所有测试通过
!git add . && git commit -m "Pre-refactor checkpoint"

# 开始重构
我想重构这个函数来提高可读性和性能：
[粘贴函数代码]
请提供重构建议，保持相同的功能

# 重构后验证
!npm test              # 确保功能不变
@code-reviewer 请审查重构后的代码
```

### 性能优化策略

```
# 性能分析
!npm run benchmark     # 运行性能测试
请分析性能瓶颈并提供优化建议
# 实施优化
!npm run benchmark     # 对比优化效果
```

## 文档编写最佳实践

### API 文档生成

```
请帮我为这个 API 端点生成 OpenAPI 文档：
[粘贴 API 代码]

格式要求：
- 包含请求/响应示例
- 详细的参数说明
- 错误处理说明
```

### README 文档维护

```
请帮我更新 README.md，包含：
1. 最新的功能介绍
2. 安装和使用说明
3. API 文档链接
4. 贡献指南

基于当前项目结构：
/init
```

## 环境管理

### 多环境配置

```
# 开发环境
!NODE_ENV=development npm start

# 生产环境部署检查
请帮我检查生产环境配置的安全性和性能
[显示配置文件内容]
```

### 依赖管理

```
# 依赖更新
!npm outdated         # 检查过期依赖
请分析这些依赖更新的风险和收益
!npm audit            # 安全审计
请帮我修复发现的安全漏洞
```

## 故障排除指南

### 常见问题解决

1. **AI 回答不准确**
   - 使用 `/clear` 清除不相关上下文
   - 提供更多具体信息
   - 使用 `/init` 重新建立项目上下文

2. **命令执行失败**
   - 检查工作目录是否正确
   - 确认依赖是否已安装
   - 查看完整错误信息

3. **性能问题**
   - 定期使用 `/clear` 清理上下文
   - 避免过长的代码粘贴
   - 分解复杂问题为小步骤

### 调试技巧

```
# 系统信息收集
!node --version && npm --version && git --version
!pwd && ls -la

# 日志分析
!tail -n 50 logs/app.log
请帮我分析这些日志中的异常模式
```

## 效率提升技巧

### 1. 使用模板和片段

创建常用代码模板：
```
请帮我创建一个 Express.js 路由模板，包含：
- 输入验证
- 错误处理
- 日志记录
- 单元测试
```

### 2. 批量操作

```
# 批量文件处理
请帮我为以下文件添加 TypeScript 类型定义：
!find src -name "*.js" | head -10
```

### 3. 自动化脚本生成

```
请帮我创建一个部署脚本，包含：
1. 代码检查和测试
2. 构建优化
3. 数据库迁移
4. 服务重启
5. 健康检查
```

## 团队协作最佳实践

### 代码规范统一

```
请帮我配置项目的代码规范工具：
- ESLint 配置
- Prettier 配置  
- Git hooks 设置
- CI/CD 集成
```

### 知识分享

```
请帮我总结这次功能开发的关键点：
1. 技术选型理由
2. 遇到的主要挑战
3. 解决方案和最佳实践
4. 对团队的建议

生成团队分享文档
```

## 安全最佳实践

### 敏感信息处理

- 永远不要在对话中粘贴真实的 API 密钥、密码或其他敏感信息
- 使用占位符或示例值
- 定期使用 `/clear` 清除可能包含敏感信息的上下文

### 代码安全检查

```
@security-auditor 请检查以下代码的安全性：
[粘贴代码，移除敏感信息]

重点关注：
- 输入验证
- 权限控制
- 数据加密
- 错误处理
```

---

**记住**：好的实践需要持续应用和改进。根据项目特点和团队需求调整这些建议，找到最适合的工作流程！
