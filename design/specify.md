
### 基于Obsidian的iFlow个人工作流管理系统的个人工作流管理系统需求规范（Specify）


#### 1. 解决信息过载与碎片化，适配Obsidian原生数据体系
- 整合分散内容：将用户的笔记、想法、任务、参考资料纳入统一管理，避免信息埋没与重复查找；所有数据需以Obsidian原生格式存储（优先Markdown文件，辅以YAML Frontmatter元数据），确保用户可通过Obsidian编辑器直接编辑，不依赖系统独立存在。
- 智能关联与生态复用：通过语义分析自动建立内容关联，且关联关系需映射为Obsidian双链（`[[链接]]`），自动打标需同步为Obsidian标签（`#标签`），与用户既有双链网络、标签体系无缝融合，不新增独立关联逻辑。


#### 2. 破解任务启动困难，衔接Obsidian任务生态
- 目标拆解与最小化步骤：将抽象宏大目标（如“完成项目报告”）自动拆解为具体可执行步骤（如“收集3个案例”“撰写引言框架”），每个步骤需满足“可量化、有明确结果、耗时≤30分钟”；生成的任务需兼容Obsidian社区任务插件格式（如Tasks插件的`- [ ] 待办`），支持双向同步。
- 降低启动门槛：为用户标记的“畏难任务”生成“预热动作”（如“打开历史报告模板”），且预热动作需基于用户ObsidianVault中已有的文件（如模板笔记、历史记录），默认填充上下文（如关联上次任务的笔记片段）。


#### 3. 适配动态状态，与Obsidian操作习惯一致
- 状态驱动的计划调整：支持根据用户每日情绪状态（如“焦虑”“专注”）和能量水平（1-10分）动态调整计划，例如能量低时仅展示3个核心任务；调整逻辑需通过Obsidian命令面板（`Ctrl+P`/`Cmd+P`）触发，遵循用户既有操作路径。
- 柔性流程设计：拒绝刚性流程，允许任务优先级、时间安排随状态实时修改；修改记录需以Obsidian笔记形式存储（如`/iFlow/plan-logs/`目录下的每日调整日志），支持通过Obsidian搜索插件检索历史调整。


#### 4. 自动跟踪与优化，兼容Obsidian数据工具
- 偏差分析与规律识别：记录“计划vs实际”的执行偏差（如预估2小时任务实际耗时4小时），识别规律（如“创意类任务耗时常为预估1.5倍”）；分析结果需暴露为YAML字段（如`estimated: 2h` `actual: 4h`），支持被Dataview等数据可视化插件调用统计。
- 落地改进建议：基于偏差提供可行动建议（如“预留1.5倍时间给创意任务”），建议内容需生成独立Obsidian笔记，并通过双链关联至对应任务/项目笔记，便于追溯。


#### 5. 统一多维度数据视图，复用Obsidian场景化能力
- 跨系统数据整合：整合分散在不同系统的个人数据（笔记、任务、日程、财务、健康等），导入后需转换为Obsidian支持的格式（如财务数据存为CSV嵌入Markdown，健康数据通过Frontmatter字段存储）。
- 场景化聚合展示：支持“场景化视图”（如“项目A视图”同时展示关联笔记、待办任务、进度日志、关联书籍标注），视图需基于Obsidian“标签页”插件逻辑实现，允许用户拖拽调整布局，与原生界面操作一致。


#### 6. 无缝集成与低认知负荷，融入Obsidian生态
- 工具切换最小化：构建无需频繁切换工具的工作环境，关联内容支持“一键跳转”（基于Obsidian双链）或“悬浮预览”（复用Obsidian原生预览逻辑）；系统核心功能（如“拆解目标”“生成复盘”）需注册为Obsidian命令，支持通过用户自定义快捷键触发。
- 交互与主题适配：编辑器内交互（如选中文字生成任务、右键菜单关联笔记）需遵循Obsidian原生设计规范（如hover效果、弹窗位置）；UI元素（如悬浮提示、任务卡片）自动适配用户当前启用的Obsidian主题（通过读取主题CSS变量），确保视觉统一。


#### 7. 智能内容管理，兼容多格式与插件协同
- 自动化处理与关联：基于语义分析自动为内容打标、生成摘要、建立关联（如EPUB书籍中“时间管理”章节关联用户“任务分类”笔记）；关联逻辑需兼容Obsidian“图谱视图”，确保在图谱中正确展示节点关系。
- 多格式支持与插件交互：支持导入处理情绪记录、计划文档、EPUB/PDF书籍等，导入的PDF标注需同步至Obsidian原生PDF插件的批注系统；生成的内容需支持被Calendar等日程插件读取（如通过`due: 2023-10-22`字段同步至日历视图）。


#### 8. 自然语言交互与个性化，尊重Obsidian用户习惯
- 口语化指令支持：支持日常口语化指令（如“明天3点提醒我整理笔记”），指令解析结果需转换为Obsidian可识别的任务格式（如带`due`字段的Markdown任务），无需用户学习新语法。
- 隐形学习与适配：后台隐形分析用户习惯（如高效时段、内容偏好），动态调整服务（如早餐后自动前置邮件提醒）；分析逻辑不依赖Obsidian未公开API，仅基于用户对原生功能的使用数据（如笔记创建时间、双链点击频率）。


#### 9. 隐私保护与渐进式展示，符合Obsidian数据安全逻辑
- 防窥模式与本地存储：敏感数据（情绪记录、财务、健康）默认启用“防窥模式”，需用户授权展示；所有数据优先存储于用户ObsidianVault本地目录（如`/iFlow/private/`），云端同步需通过Obsidian官方同步功能或用户指定的加密方式，禁止独立上传。
- 信息密度动态调整：根据用户状态（专注/浏览）调整信息密度：专注时仅显示核心任务+1条关联笔记，放松时展示完整知识网络；密度调整需通过Obsidian“阅读模式”/“编辑模式”切换联动，不新增独立视图开关。


#### 10. 构建个人知识体系，强化Obsidian知识网络
- 智能关联与链路可视化：实现笔记、任务、项目、参考资料的智能关联，形成可追溯的知识网络（如“任务-参考资料-复盘结论”链路）；关联链路需在Obsidian“图谱视图”中以自定义颜色/线条区分（如任务与笔记的关联用蓝色线条），增强可视化辨识度。
- 知识节点双向交互：支持从任务笔记跳转至关联参考资料，从参考资料反向追溯依赖的任务；交互逻辑复用Obsidian双链的“反向链接”面板，确保操作一致性。


#### 11. 周期性复盘与生活管理，衔接Obsidian数据生态
- 个性化复盘报告：自动生成日/周/月复盘报告，聚焦用户关心维度（如学生侧重“学习效率”，职场侧重“项目进度”），报告以Obsidian笔记形式存储，包含可行动建议（如“本周三下午能量最低，建议将会议安排在上午”）。
- 生活数据关联分析：集成习惯追踪（如“每日阅读”）、财务监控（消费统计）、健康数据记录（睡眠、运动），数据需通过YAML字段或嵌入表格存储，支持与工作数据关联分析（如通过Dataview查询“睡眠不足7小时时的任务完成率”）。


#### 12. 主动引导与协作式交互，遵循Obsidian插件规范
- 适时主动建议：基于用户状态主动提供适配建议（如连续3天未完成同一任务时询问“是否需要拆分步骤？”），建议弹窗需符合Obsidian插件UI规范（如右上角关闭按钮、浅色背景），避免视觉突兀。
- 容错与交互可控：允许用户“不完美使用”（如忘记记录情绪时自动填补推测），所有主动交互可在Obsidian“设置-插件-iFlow”中关闭或调整频率；后台任务（如语义分析）需限制资源占用（单次分析不超过100MB内存），避免影响Obsidian主进程性能。


#### 13. 插件开发与生态兼容底线
- API与版本兼容：基于Obsidian稳定版API（v1.9+）开发，拒绝依赖未公开内部API，确保Obsidian版本更新时功能稳定；发布前需通过官方插件兼容性测试工具验证。
- 目录与权限尊重：不强制修改用户现有Vault目录结构，系统生成文件（如复盘报告、任务笔记）可配置存储路径（默认`/iFlow/`）；仅申请必要的文件系统权限（如读取Markdown、写入指定目录），不获取Vault外数据。


通过以上规范，系统需作为Obsidian生态的有机组成部分——既利用Obsidian的原生优势（双链、本地存储、社区插件），又通过功能创新解决用户核心痛点，最终实现“在Obsidian中无缝管理个人工作流”的目标。
