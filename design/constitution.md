
以下是针对“基于Obsidian的iFlow个人工作流管理系统”的 Constitution（核心原则），旨在为工作流的设计、开发和迭代提供根本性约束与指导，确保所有功能围绕用户核心需求展开：

### 一、用户中心原则：以人为核心，而非工具规则
1. 最小认知负荷优先
   - 所有功能设计必须降低操作摩擦，避免为功能而功能的冗余设计。例如：自然语言交互需支持日常口语化表达（如明天下午3点提醒我整理项目笔记），无需用户学习特定语法。
   - 禁止强制用户适应工具逻辑（如固定模板、刚性流程），允许自定义交互习惯（如快捷键、指令偏好）。

2. 尊重状态波动性
   - 系统必须默认接纳用户情绪、能量、注意力的动态变化，拒绝“完美计划”预设。例如：任务优先级自动根据用户当日能量评分（1-10分）调整展示顺序，能量低时只显示3个核心任务。
   - 禁止因“计划未完成”产生负面反馈（如红色警告、强制复盘），改为中性提示（如“今天完成了2/5的计划，是否需要将剩余任务拆分到明天？”）。


### 二、信息整合原则：打破孤岛，构建“有机关联”的知识网络
1. 碎片化信息的“自动缝合”
   - 所有输入内容（笔记、任务、情绪记录、PDF标注等）必须通过语义分析自动建立关联，而非依赖用户手动打标。例如：识别到笔记中“Q3产品迭代”与任务“完成产品原型设计”存在因果关系，自动生成双向链接。
   - 禁止信息“沉淀即孤立”，需确保新内容在10秒内被纳入现有知识网络（如：导入的EPUB书籍中“时间管理四象限”章节，自动关联到用户已有“任务分类”笔记）。

2. 统一视图的“按需聚合”
   - 支持基于“场景”聚合多维度数据（如“项目A视图”同时展示相关笔记、待办任务、进度日志、关联书籍标注），而非按“数据类型”（笔记/任务/日程）割裂展示。
   - 禁止强制用户在不同功能模块间切换查找信息，所有关联内容需支持“一键跳转”或“悬浮预览”。


### 三、任务转化原则：从“抽象目标”到“可执行动作”的平滑过渡
1. 目标拆解的“最小可行性”
   - 对于宏大目标（如“写一本书”），系统必须自动拆解为“最小可执行步骤”（如“确定第1章主题”“收集3个案例”），且每个步骤需满足：可量化（耗时≤30分钟）、有明确结果（如“生成500字大纲”）。
   - 禁止拆解出模糊步骤（如“准备资料”），若AI无法精准拆解，需主动询问用户（如“你认为‘准备资料’需要先完成哪件事？”）。

2. 启动门槛的“极致降低”
   - 对用户标记为“畏难”的任务，自动生成“预热动作”（如：任务“写周报”的预热动作是“打开上周周报复制格式”），且预热动作耗时≤1分钟。
   - 禁止让用户面对“空白任务页”，需默认填充上下文（如：任务“复习数学”自动关联上次复习的笔记片段、错题记录）。


### 四、智能适配原则：让系统“理解”用户，而非用户“适应”系统
1. 行为模式的“隐形学习”
   - 后台自动分析用户习惯（如：每日高效时段、任务拖延类型、内容关联偏好），且分析过程不干扰用户操作（无弹窗询问“你是否喜欢这种排序？”）。
   - 基于学习结果动态调整服务（如：发现用户习惯在早餐后处理邮件，自动在该时段将邮件提醒前置；识别到用户对“财务数据”敏感，默认隐藏非必要的消费统计图表）。

2. 反馈闭环的“数据驱动”
   - 自动跟踪“计划vs实际”偏差（如：预估2小时的任务实际用了4小时），并生成非评判性规律总结（如“你处理需要创意的任务时，实际耗时通常是预估的1.5倍”）。
   - 基于偏差提供可落地的改进建议（如：“下次预估创意类任务时，可预留1.5倍时间”），禁止空泛结论（如“你需要提高效率”）。


### 五、安全与可控原则：用户对“自己的数据”拥有绝对主导权
1. 隐私保护的“默认最高级”
   - 所有敏感数据（情绪记录、财务信息、健康数据）默认启用“防窥模式”，需用户主动授权才能展示（如：健康数据仅在“个人复盘”场景下可见，且需二次确认）。
   - 禁止数据被用于系统外目的（如：第三方分析、广告推送），本地数据优先存储于Obsidian仓库，云端同步需加密且支持“一键销毁”。

2. 信息展示的“渐进式暴露”
   - 根据用户当前状态（如：专注模式/浏览模式）动态调整信息密度：专注时只显示核心任务+1条关联笔记；放松时可展示完整知识网络。
   - 禁止一次性推送过量信息（如：打开项目视图时，默认只显示今日待办，而非全部历史记录）。


### 六、全场景覆盖原则：从“工作”到“生活”的无缝融合
1. 多维度数据的“有机联动”
   - 支持工作数据（任务、项目）与生活数据（习惯、健康、财务）的关联分析（如：发现“睡眠不足7小时”时，次日高难度任务完成率下降40%，自动建议调整任务安排）。
   - 兼容多格式输入（Obsidian笔记、Markdown、EPUB、PDF、Excel财务表、健康APP导出数据），且导入后保持原格式可编辑性。

2. 周期性复盘的“自动化+个性化”
   - 自动生成日/周/月复盘报告，内容聚焦“用户关心的维度”（如：学生用户侧重“学习效率”，职场用户侧重“项目进度”），而非固定模板。
   - 复盘报告需包含“可行动建议”（如：“本周三下午能量最低，建议将会议安排在上午”），禁止纯数据堆砌。


### 七、协作与引导原则：系统是“伙伴”，而非“管理者”
1. 主动交互的“适时性”
   - 仅在用户需要时主动介入（如：连续3天未完成同一任务时询问“是否需要拆分步骤？”；发现新导入的书籍与旧笔记高度相关时提示“是否查看关联内容？”）。
   - 禁止无意义的打扰（如：定时弹窗“该复盘了”），所有主动交互可被用户关闭或调整频率。

1. 容错与包容
   - 允许用户“不完美使用”（如：偶尔忘记记录情绪、任务未按计划执行），系统需自动填补空白（如：根据当日任务完成情况推测情绪状态），而非惩罚性提示。

### 八、开发与质量保障原则

1. 代码质量标准
    - 遵循模块化拆分，单一功能模块代码量不超过 500 行，核心逻辑需添加详细注释（注释覆盖率≥30%）；
    - 强制使用类型检查工具（如 TypeScript），禁止未处理的异常与魔术值，定期进行代码静态分析（每月至少 1 次）。

2. 测试规范
    - 核心功能（如目标拆解、信息关联、数据同步）单元测试覆盖率≥80%，集成测试覆盖 100% 用户关键场景；
    - 新增功能需通过 边界测试（如极端情绪值、超大文件导入），并保留测试用例作为回归验证依据。

3. 用户体验一致性
    - 交互模式统一：所有按钮点击反馈（如颜色变化、加载动画）遵循 Obsidian 原生设计语言，避免自定义样式冲突；
    - 反馈机制标准化：错误提示需明确原因 + 解决方案（如 “文件导入失败：请检查 PDF 格式是否损坏，可尝试重新导出”），避免模糊提示（如 “操作失败”）。

4. 性能要求
    - 核心命令（如自然语言解析、任务拆解）响应时间≤500ms，批量数据处理（如 1000 + 笔记关联分析）后台异步执行，不阻塞用户操作；
    - 内存占用峰值不超过 Obsidian 宿主进程的 15%，禁止长时间占用 CPU（单任务计算耗时≥3 秒需拆分或提示用户）。

### 核心约束总结
本Constitution的所有原则不可被功能开发优先级推翻，任何新功能必须通过以下检验：
1. 降低用户信息焦虑或操作负担；
2. 以用户状态（情绪、能量、习惯）主导工具行为；
3. 增强信息关联而非制造割裂；
4. 符合代码质量、测试、体验一致性与性能的硬性标准。

违反上述原则的功能设计需重新评估，直至符合用户核心需求。生成文件使用中文。
